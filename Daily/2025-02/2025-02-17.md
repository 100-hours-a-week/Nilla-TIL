## 날짜: 2025-02-17

### 스크럼
- 쿠버네티스 이해하기

### 새로 배운 내용
#### 쿠버네티스 한줄 정리
|  | 정의 | 비고 |
| --- | --- | --- |
| kubectl| k8s 시스템을 다루기 위해 사용되는 명령어이자 클라이언트 도구 | - 클러스터 관리 도구 <br>- 마스터 노드에 명령어를 위임하여 필요한 작업을 수행할 수 있도록 한다<br>- 가장 빈번하게 이용되는 CLI 이다. |
| kube-scheduler | 클러스터 내에서 파드가 실행될 노드를 결정하는 컴포넌트 | - 파드의 정보(리소스, 조건)를 기준으로 스케줄링 한다<br>- 스케줄링 정보를 API Server에 업데이트하여 할당한다 |
| kube-apiserver| 쿠버네티스 클러스터의 중앙 API(Master Node) 게이트웨이 | - API 클라이언트로부터 오는 REST 요청을 검증하고 이를 클러스터에 반영<br>- k8s의 모든 요청은 API형식으로 이루어진다. |
| etcd | 클러스터의 상태, 로그, 구성 정보를 저장하는 저장소 | - etcd에 로그, 리소스 정보 등 모든 정보를 저장한다<br>- API Server의 명령어 또한 etcd에 저장한다 |
| kube-controller | k8s 클러스터에서 실행되는 여러 개의 컨트롤러를 통합 관리하는 프로세스 | - 상태의 변경을 감지하고 상태를 유지하기 위해 조정한다 |
| kube-proxy| 네트워크 통신을 관리하는 컴포넌트 | - Pod간 통신 및 클러스터 외부 트래픽을 라우팅하는 역할을 한다. <br>- 로드밸런싱 기능, iptables 규칙 관리, Cluster IP를 DNS에 등록하는 기능을 한다. |
| kubelet | 노드에서 컨테이너가 동작하도록 관리해주는 agent | - 각 노드에서 파드와 컨테이너의 실행 및 생성 후 정상 동작을 관리한다.<br>- 워크로드 관리시 내려지는 명령들은 kubelet을 통해 수행된다. <br>- API Server와 정보 교환을 한다 |
| 워크로드 | 클러스터에서 실행되는 애플리케이션이나 서비스를 나타내는 작업 단위 | - 애플리케이션 집합<br>- 컨테이너 실행을 관리하기 위해 사용<br>- 컨테이너, 파드, 컨트롤러의 그룹이다 |
| 컨테이너 | 실행 중인 애플리케이션을 포함하는 독립된 프로세스. | - k8s에서 컨테이너만 독자적으로 실행하는 것은 불가능 = 파드 내에서 실행해야 함.<br>- 여러 개의 파드에 동시에 속할 수 없다 |
| 파드 | 하나 이상의 컨테이너를 포함한 애플리케이션의 최소 단위 | - 하나의 파드에 여러개의 컨테이너가 있을 수 있다(비슷한 기능의 컨테이너만)<br>- 파드 내의 컨테이너는 네트워크 네임스페이스와 스토리지를 공유한다<br>- 파드의 IP는 DHCP에 의해 부여되고 삭제시 회수된다. 그래서 서브넷 대역을 넉넉하게 설정해야한다. |
| 컨트롤러 | 파드를 관리하는 역할, kube-controller-manager를 통해서 통합 관리된다. | - 디플로이먼트, 레플리카셋,스테이트풀셋, 잡, 크론잡, 데몬셋, 가비지 컬렉션 등이 있다. |
| 설정(Configuration) | 클러스터를 동작시키기 위한 설정들이다. | - ConfigMap 또는 Secret 오브젝트를 사용한다. |
| 서비스 | 파드와 클라이언트 간의 연결을 할 수 있게 해주는 오브젝트 | - Pod는 동적으로 생성되고 사라져 IP가 변동 될 수 있기에 고정된 네트워크 엔드 포인트를 제공하기 위한 것 |
| 스토리지 | 클러스터 내 데이터를 영구적으로 저장하기 위한 리소스 | - PV, PVC 등 데이터 보관함<br>- 도커의 볼륨 개념과 비슷하다 |
| 매니페스트 | 쿠버네티스 리소스를 정의하는 설정 파일 | - docker의 docker file이라고 보면 됨. <br>- json이나 yaml으로 작성된다.  |
| 클러스터 네트워크
 | 클러스터(노드와 파드)간 통신할 수 있도록 하는 네트워크 | - 로드벨런싱이나 NodePort를 통해 접속 |
| Flannel | 각 노드의 pod 들이 서로 통신할 수 있도록 가상의 네트워크를 설정 | - 기본적으로 L3 네트워크 오버레이 방식을 사용 <br>- 네트워크 기능만 있어 접근제어 기능은 제공하지 않는다 <br>- 데몬셋(모든 노드에서 동일한 파드를 실행) 컨트롤러에 의해 배포되기 때문에, 노드가 추가되면 자동 확장된다 |
| Calico | 노드간 파드 통신과 네트워크 접근 제어 기능을 추가 제공한다. | - 접근 제어 기능을 제공한다. |
| 디플로이먼트 | - 여러 개의 파드로 수평한 클러스터를 구성할 때 사용한다. <br>- 파드와 레플리카셋을 관리하여 애플리케이션의 배포 및 업데이트를 자동화하는 객체 | - stateless 앱을 배포할 때 사용하는 컨트롤러 <br>- 가동 중 파드를 차례대로 교체, 개수 조절이 가능하다 <br>- 파드와 레플리카셋에 버전 관리 기능이 추가된 것이다. <br>- 롤링 업데이트, 롤백 기능 |
| 스테이트 풀셋 | 상태 정보를 유지해야 하는 애플리케이션을 위한 파드 배포 및 관리를 지원하는 객체 | 순차적 업데이트 필요 |
| 잡 <br>크론잡 | - 배치 처리 컨테이너가 정상 종료시까지 재실행을 반복하는 컨트롤러 <br>- 한 번 실행되고 끝나는 작업을 위한 워크로드/ 크론잡은 주기적으로 실행되는 잡 | - 배치 작업 자동화<br>- 실행 횟수, 동시 실행개수, 실행 횟수 상한값 등을 파드가 삭제되기 전까지 로그로 남겨둔다<br>- 크론잡의 경우 지정한 시간에 정기적으로 잡을 생성하는 역할을 한다. |
| 데몬셋| 모든 노드에 동일한 파드의 복사본을 배포해주는 객체 | - 데몬셋이 삭제되면 복사본을 가지는 파드들도 정리된다 <br>- 동일한 파드를 실행하여 일관성을 유지하기 위해 사용 |
| 리플리카셋| 파드가 기동되어야 하는 수를 유지하는 컨트롤러 | - pod 의 개수를 자동적으로 조정하여 클러스터의 안정성을 유지 |
| 사이드카 패턴 | Pod 내부에서 보조 역할을 수행하는 컨테이너를 추가하여 애플리케이션의 기능을 확장하는 방식 | - 같은 Pod 내에서 네트워크 및 스토리지를 공유하기 때문에 기능 확장을 하기 편하다. <br>- 메인 컨테이너가 로그를 파일로 저장하고 사이드카 컨테이너가 이걸 중앙 로그 서버로 전송하는 예시 등이 있다. <br>- 로그 수집 및 전달, 프록시, 캐싱 등에 사용된다. |
| 인그레스 | 클러스터 내부로 접근하는 요청들을 어떻게 처리할지 정한 규칙의 모음 | - SSL을 통해 보안 강화 <br>- 로드 밸런싱, 트래픽 분산 |
| HPA | 부하에 따라 파드 수를 자동으로 확장 또는 축소하는 기능, Horizontal Pod Autoscaler의 약자 | 자동 스케일링 <br>- vertical scaling은 컨테이너 개수 조절 |

### 오늘의 회고
- 대망의 쿠버네티스 첫날이었는데, 역시 굉장히 많은 내용이 있었다. 워크로드 개념이 애매하다고 생각해 많이 헤맸는데 실행 도구라고 생각하는 편이 이해가 쉬울 것 같았다. 스크럼 때 다시 토의해볼 예정이다. 

### 참고 자료 및 링크
- x
